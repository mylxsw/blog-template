<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>机器学习入门：从理论到实践</title>
    <link rel="stylesheet" href="/styles/modern.css">
    <link rel="alternate" type="application/rss+xml" title="人人链向未来 RSS Feed" href="/rss.xml">
    <!-- Highlight.js theme -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
                        colors: {
                            primary: { 600: '#FECE00', 700: '#e6b900' },
                            accent: { 400: '#FECE00', 500: '#ffdb4d' }
                        }
          }
        }
      }
    </script>
</head>
<body class="bg-gray-50">
    <header class="navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <a href="/" class="navbar-logo">人人链向未来</a>
            </div>
            <nav class="navbar-menu" id="navbar-menu">
                <div class="navbar-nav">
                    <a href="/" class="nav-item">
                        <span class="nav-text">首页</span>
                    </a>
                    <a href="/about.html" class="nav-item">
                        <span class="nav-text">关于</span>
                    </a>
                    <a href="/rss.xml" class="nav-item nav-item-special" target="_blank" rel="noopener noreferrer">
                        <span class="nav-text">RSS</span>
                    </a>
                </div>
            </nav>
            <button class="navbar-toggle" id="navbar-toggle" aria-label="切换导航菜单">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <article class="article-container">
            <div class="article-header">
                <h1 class="article-title">机器学习入门：从理论到实践</h1>
                <div class="article-meta">
                    <div class="flex items-center space-x-2">
                        <time datetime="2023-08-30T00:00:00.000Z">2023年8月30日</time>
                    </div>
                    <div class="flex flex-wrap gap-2">
                        <span class="post-tag">machine-learning</span>
                        <span class="post-tag">ai</span>
                        <span class="post-tag">python</span>
                    </div>
                </div>
            </div>
            <div class="article-content">
                <p>机器学习作为人工智能的重要分支，正在改变着我们的生活和工作方式。本文将带你从基础理论开始，逐步了解机器学习的核心概念和实践方法。</p>
<h2>什么是机器学习？</h2>
<p>机器学习是人工智能的一个子领域，它使计算机能够在不被明确编程的情况下从数据中学习并做出决策或预测。</p>
<h3>机器学习的类型</h3>
<h4>1. 监督学习（Supervised Learning）</h4>
<p>监督学习使用带有标签的训练数据来训练模型。</p>
<p><strong>常见算法</strong>：</p>
<ul>
<li>线性回归（Linear Regression）</li>
<li>逻辑回归（Logistic Regression）</li>
<li>支持向量机（SVM）</li>
<li>决策树（Decision Trees）</li>
<li>随机森林（Random Forest）</li>
<li>神经网络（Neural Networks）</li>
</ul>
<p><strong>应用场景</strong>：</p>
<ul>
<li>邮件垃圾过滤</li>
<li>图像识别</li>
<li>价格预测</li>
</ul>
<h4>2. 无监督学习（Unsupervised Learning）</h4>
<p>无监督学习处理没有标签的数据，旨在发现数据中的模式或结构。</p>
<p><strong>常见算法</strong>：</p>
<ul>
<li>K-均值聚类（K-Means Clustering）</li>
<li>层次聚类（Hierarchical Clustering）</li>
<li>主成分分析（PCA）</li>
<li>关联规则学习</li>
</ul>
<p><strong>应用场景</strong>：</p>
<ul>
<li>客户细分</li>
<li>推荐系统</li>
<li>异常检测</li>
</ul>
<h4>3. 强化学习（Reinforcement Learning）</h4>
<p>强化学习通过与环境交互来学习，通过奖励和惩罚机制优化决策。</p>
<p><strong>应用场景</strong>：</p>
<ul>
<li>游戏AI</li>
<li>自动驾驶</li>
<li>机器人控制</li>
</ul>
<h2>机器学习工作流程</h2>
<h3>1. 问题定义</h3>
<p>明确要解决的问题类型：</p>
<ul>
<li>分类问题（Classification）</li>
<li>回归问题（Regression）</li>
<li>聚类问题（Clustering）</li>
</ul>
<h3>2. 数据收集</h3>
<p>收集与问题相关的数据，数据质量直接影响模型性能。</p>
<h3>3. 数据预处理</h3>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler, LabelEncoder

<span class="hljs-comment"># 加载数据</span>
data = pd.read_csv(<span class="hljs-string">&#x27;data.csv&#x27;</span>)

<span class="hljs-comment"># 处理缺失值</span>
data.fillna(data.mean(), inplace=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># 编码分类变量</span>
label_encoder = LabelEncoder()
data[<span class="hljs-string">&#x27;category&#x27;</span>] = label_encoder.fit_transform(data[<span class="hljs-string">&#x27;category&#x27;</span>])

<span class="hljs-comment"># 特征缩放</span>
scaler = StandardScaler()
data[[<span class="hljs-string">&#x27;feature1&#x27;</span>, <span class="hljs-string">&#x27;feature2&#x27;</span>]] = scaler.fit_transform(data[[<span class="hljs-string">&#x27;feature1&#x27;</span>, <span class="hljs-string">&#x27;feature2&#x27;</span>]])
</code></pre></div><h3>4. 特征工程</h3>
<p>特征工程是机器学习中非常重要的一步，好的特征能够显著提升模型性能。</p>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-comment"># 创建新特征</span>
data[<span class="hljs-string">&#x27;feature_ratio&#x27;</span>] = data[<span class="hljs-string">&#x27;feature1&#x27;</span>] / (data[<span class="hljs-string">&#x27;feature2&#x27;</span>] + <span class="hljs-number">1e-8</span>)  <span class="hljs-comment"># 避免除零错误</span>

<span class="hljs-comment"># 特征选择</span>
<span class="hljs-keyword">from</span> sklearn.feature_selection <span class="hljs-keyword">import</span> SelectKBest, f_classif

selector = SelectKBest(score_func=f_classif, k=<span class="hljs-number">10</span>)
selected_features = selector.fit_transform(X, y)
</code></pre></div><h3>5. 模型选择与训练</h3>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
<span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> RandomForestClassifier
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression
<span class="hljs-keyword">from</span> sklearn.svm <span class="hljs-keyword">import</span> SVC

<span class="hljs-comment"># 分割数据</span>
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="hljs-number">0.2</span>, random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment"># 训练多个模型</span>
models = {
    <span class="hljs-string">&#x27;Random Forest&#x27;</span>: RandomForestClassifier(),
    <span class="hljs-string">&#x27;Logistic Regression&#x27;</span>: LogisticRegression(),
    <span class="hljs-string">&#x27;SVM&#x27;</span>: SVC()
}

<span class="hljs-keyword">for</span> name, model <span class="hljs-keyword">in</span> models.items():
    model.fit(X_train, y_train)
    accuracy = model.score(X_test, y_test)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">{name}</span> Accuracy: <span class="hljs-subst">{accuracy:<span class="hljs-number">.4</span>f}</span>&#x27;</span>)
</code></pre></div><h3>6. 模型评估</h3>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> classification_report, confusion_matrix

<span class="hljs-comment"># 选择最佳模型进行详细评估</span>
best_model = RandomForestClassifier()
best_model.fit(X_train, y_train)
y_pred = best_model.predict(X_test)

<span class="hljs-comment"># 分类报告</span>
<span class="hljs-built_in">print</span>(classification_report(y_test, y_pred))

<span class="hljs-comment"># 混淆矩阵</span>
<span class="hljs-built_in">print</span>(confusion_matrix(y_test, y_pred))
</code></pre></div><h3>7. 模型优化</h3>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> GridSearchCV

<span class="hljs-comment"># 超参数调优</span>
param_grid = {
    <span class="hljs-string">&#x27;n_estimators&#x27;</span>: [<span class="hljs-number">50</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>],
    <span class="hljs-string">&#x27;max_depth&#x27;</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-literal">None</span>],
    <span class="hljs-string">&#x27;min_samples_split&#x27;</span>: [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>]
}

grid_search = GridSearchCV(
    RandomForestClassifier(),
    param_grid,
    cv=<span class="hljs-number">5</span>,
    scoring=<span class="hljs-string">&#x27;accuracy&#x27;</span>
)

grid_search.fit(X_train, y_train)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Best parameters: <span class="hljs-subst">{grid_search.best_params_}</span>&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Best cross-validation score: <span class="hljs-subst">{grid_search.best_score_:<span class="hljs-number">.4</span>f}</span>&quot;</span>)
</code></pre></div><h2>Python机器学习库</h2>
<h3>Scikit-learn</h3>
<p>Scikit-learn是最流行的Python机器学习库，提供了丰富的算法和工具。</p>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-comment"># 安装</span>
<span class="hljs-comment"># pip install scikit-learn</span>

<span class="hljs-comment"># 埸用模块</span>
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
<span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> RandomForestClassifier
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score
</code></pre></div><h3>TensorFlow和Keras</h3>
<p>TensorFlow是Google开发的深度学习框架，Keras是其高级API。</p>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-comment"># 安装</span>
<span class="hljs-comment"># pip install tensorflow</span>

<span class="hljs-comment"># 简单神经网络示例</span>
<span class="hljs-keyword">import</span> tensorflow <span class="hljs-keyword">as</span> tf
<span class="hljs-keyword">from</span> tensorflow <span class="hljs-keyword">import</span> keras

model = keras.Sequential([
    keras.layers.Dense(<span class="hljs-number">64</span>, activation=<span class="hljs-string">&#x27;relu&#x27;</span>, input_shape=(<span class="hljs-number">10</span>,)),
    keras.layers.Dense(<span class="hljs-number">32</span>, activation=<span class="hljs-string">&#x27;relu&#x27;</span>),
    keras.layers.Dense(<span class="hljs-number">1</span>, activation=<span class="hljs-string">&#x27;sigmoid&#x27;</span>)
])

model.<span class="hljs-built_in">compile</span>(optimizer=<span class="hljs-string">&#x27;adam&#x27;</span>,
              loss=<span class="hljs-string">&#x27;binary_crossentropy&#x27;</span>,
              metrics=[<span class="hljs-string">&#x27;accuracy&#x27;</span>])
</code></pre></div><h3>PyTorch</h3>
<p>PyTorch是Facebook开发的深度学习框架，以其动态计算图而闻名。</p>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-comment"># 安装</span>
<span class="hljs-comment"># pip install torch</span>

<span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleNet</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>(SimpleNet, <span class="hljs-variable language_">self</span>).__init__()
        <span class="hljs-variable language_">self</span>.fc1 = nn.Linear(<span class="hljs-number">10</span>, <span class="hljs-number">64</span>)
        <span class="hljs-variable language_">self</span>.fc2 = nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">32</span>)
        <span class="hljs-variable language_">self</span>.fc3 = nn.Linear(<span class="hljs-number">32</span>, <span class="hljs-number">1</span>)
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        x = torch.relu(<span class="hljs-variable language_">self</span>.fc1(x))
        x = torch.relu(<span class="hljs-variable language_">self</span>.fc2(x))
        x = torch.sigmoid(<span class="hljs-variable language_">self</span>.fc3(x))
        <span class="hljs-keyword">return</span> x
</code></pre></div><h2>实际案例：房价预测</h2>
<p>让我们通过一个实际案例来演示机器学习的完整流程。</p>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
<span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> RandomForestRegressor
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error, r2_score
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

<span class="hljs-comment"># 1. 数据加载</span>
<span class="hljs-comment"># 假设我们有一个包含房价数据的CSV文件</span>
data = pd.read_csv(<span class="hljs-string">&#x27;house_prices.csv&#x27;</span>)

<span class="hljs-comment"># 2. 数据探索</span>
<span class="hljs-built_in">print</span>(data.head())
<span class="hljs-built_in">print</span>(data.info())
<span class="hljs-built_in">print</span>(data.describe())

<span class="hljs-comment"># 3. 数据预处理</span>
<span class="hljs-comment"># 处理缺失值</span>
data = data.dropna()

<span class="hljs-comment"># 编码分类变量</span>
data = pd.get_dummies(data, columns=[<span class="hljs-string">&#x27;neighborhood&#x27;</span>, <span class="hljs-string">&#x27;house_type&#x27;</span>])

<span class="hljs-comment"># 4. 特征选择</span>
features = [col <span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> data.columns <span class="hljs-keyword">if</span> col != <span class="hljs-string">&#x27;price&#x27;</span>]
X = data[features]
y = data[<span class="hljs-string">&#x27;price&#x27;</span>]

<span class="hljs-comment"># 5. 数据分割</span>
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=<span class="hljs-number">0.2</span>, random_state=<span class="hljs-number">42</span>
)

<span class="hljs-comment"># 6. 模型训练</span>
model = RandomForestRegressor(n_estimators=<span class="hljs-number">100</span>, random_state=<span class="hljs-number">42</span>)
model.fit(X_train, y_train)

<span class="hljs-comment"># 7. 模型预测</span>
y_pred = model.predict(X_test)

<span class="hljs-comment"># 8. 模型评估</span>
mse = mean_squared_error(y_test, y_pred)
r2 = r2_score(y_test, y_pred)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Mean Squared Error: <span class="hljs-subst">{mse:<span class="hljs-number">.2</span>f}</span>&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;R² Score: <span class="hljs-subst">{r2:<span class="hljs-number">.4</span>f}</span>&quot;</span>)

<span class="hljs-comment"># 9. 特征重要性</span>
feature_importance = pd.DataFrame({
    <span class="hljs-string">&#x27;feature&#x27;</span>: features,
    <span class="hljs-string">&#x27;importance&#x27;</span>: model.feature_importances_
}).sort_values(<span class="hljs-string">&#x27;importance&#x27;</span>, ascending=<span class="hljs-literal">False</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nTop 10 Important Features:&quot;</span>)
<span class="hljs-built_in">print</span>(feature_importance.head(<span class="hljs-number">10</span>))

<span class="hljs-comment"># 10. 可视化结果</span>
plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
plt.scatter(y_test, y_pred, alpha=<span class="hljs-number">0.5</span>)
plt.plot([y_test.<span class="hljs-built_in">min</span>(), y_test.<span class="hljs-built_in">max</span>()], [y_test.<span class="hljs-built_in">min</span>(), y_test.<span class="hljs-built_in">max</span>()], <span class="hljs-string">&#x27;r--&#x27;</span>, lw=<span class="hljs-number">2</span>)
plt.xlabel(<span class="hljs-string">&#x27;Actual Prices&#x27;</span>)
plt.ylabel(<span class="hljs-string">&#x27;Predicted Prices&#x27;</span>)
plt.title(<span class="hljs-string">&#x27;Actual vs Predicted House Prices&#x27;</span>)
plt.show()
</code></pre></div><h2>机器学习最佳实践</h2>
<h3>1. 数据质量至关重要</h3>
<ul>
<li>确保数据的准确性和完整性</li>
<li>处理异常值和噪声</li>
<li>保持数据的一致性</li>
</ul>
<h3>2. 避免过拟合</h3>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> cross_val_score

<span class="hljs-comment"># 使用交叉验证评估模型</span>
scores = cross_val_score(model, X, y, cv=<span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Cross-validation scores: <span class="hljs-subst">{scores}</span>&quot;</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Average CV score: <span class="hljs-subst">{scores.mean():<span class="hljs-number">.4</span>f}</span>&quot;</span>)
</code></pre></div><h3>3. 特征工程的重要性</h3>
<ul>
<li>创建有意义的新特征</li>
<li>选择最相关的特征</li>
<li>标准化或归一化数据</li>
</ul>
<h3>4. 模型选择策略</h3>
<ul>
<li>尝试多种算法</li>
<li>使用集成方法提升性能</li>
<li>考虑模型的可解释性</li>
</ul>
<h3>5. 持续学习和改进</h3>
<ul>
<li>监控模型在生产环境中的表现</li>
<li>定期重新训练模型</li>
<li>跟踪数据分布的变化</li>
</ul>
<h2>常见误区和注意事项</h2>
<h3>1. 数据泄露</h3>
<p>确保测试数据在训练过程中完全不可见：</p>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-comment"># 错误做法：先处理数据再分割</span>
<span class="hljs-comment"># data_processed = preprocess(data)</span>
<span class="hljs-comment"># X_train, X_test, y_train, y_test = train_test_split(data_processed)</span>

<span class="hljs-comment"># 正确做法：先分割再处理</span>
X_train, X_test, y_train, y_test = train_test_split(X, y)
X_train_processed = preprocess(X_train)
X_test_processed = preprocess(X_test)  <span class="hljs-comment"># 使用训练集的参数</span>
</code></pre></div><h3>2. 过度依赖准确率</h3>
<p>对于不平衡数据集，准确率可能具有误导性：</p>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> classification_report

<span class="hljs-comment"># 使用更全面的评估指标</span>
<span class="hljs-built_in">print</span>(classification_report(y_test, y_pred))
</code></pre></div><h2>未来趋势</h2>
<h3>1. AutoML</h3>
<p>自动化机器学习正在降低机器学习的门槛：</p>
<div class="code-block"><button class="copy-code-btn" type="button" aria-label="复制代码">复制</button><pre><code class="hljs language-python"><span class="hljs-comment"># 使用AutoML库示例</span>
<span class="hljs-comment"># import autosklearn.classification</span>
<span class="hljs-comment"># automl = autosklearn.classification.AutoSklearnClassifier()</span>
<span class="hljs-comment"># automl.fit(X_train, y_train)</span>
</code></pre></div><h3>2. 联邦学习</h3>
<p>在保护隐私的同时进行分布式机器学习。</p>
<h3>3. 可解释AI</h3>
<p>提高机器学习模型的透明度和可解释性。</p>
<h2>结语</h2>
<p>机器学习是一个快速发展的领域，掌握其基础知识和实践技能对于现代开发者来说至关重要。通过本文的介绍，希望你能对机器学习有一个全面的了解，并能够开始自己的机器学习之旅。</p>
<p>记住，机器学习不仅仅是算法和模型，更重要的是对问题的理解、数据的处理和结果的解释。持续学习和实践是掌握这门技术的关键。</p>

            </div>
        </article>
    </main>
    <footer class="footer">
        <div class="max-w-6xl mx-auto px-4">
            <p>&copy; 2025 人人链向未来. All rights reserved.</p>
            <p class="mt-2"><a href="/rss.xml" class="text-accent-400 hover:text-accent-500">📡 订阅 RSS</a></p>
        </div>
    </footer>
    <script>
        // 移动端导航菜单切换 + 代码复制按钮
        document.addEventListener('DOMContentLoaded', function() {
                // 图片加载失败占位符
                document.querySelectorAll('img').forEach(img => {
                    img.addEventListener('error', function() {
                        if (this.dataset.fallbackApplied) return;
                        this.dataset.fallbackApplied = '1';
                        this.src = '/assets/placeholder.png';
                        this.classList.add('placeholder');
                    }, { once: true });
                });
            const navbarToggle = document.getElementById('navbar-toggle');
            const navbarMenu = document.getElementById('navbar-menu');
            
            if (navbarToggle && navbarMenu) {
                navbarToggle.addEventListener('click', function() {
                    navbarToggle.classList.toggle('open');
                    navbarMenu.classList.toggle('open');
                });
                
                // 点击菜单项后关闭菜单
                const navItems = navbarMenu.querySelectorAll('.nav-item');
                navItems.forEach(item => {
                    item.addEventListener('click', function() {
                        navbarToggle.classList.remove('open');
                        navbarMenu.classList.remove('open');
                    });
                });
                
                // 点击菜单外部关闭菜单
                document.addEventListener('click', function(e) {
                    if (!navbarToggle.contains(e.target) && !navbarMenu.contains(e.target)) {
                        navbarToggle.classList.remove('open');
                        navbarMenu.classList.remove('open');
                    }
                });
            }

            // 复制代码：事件委托
            document.body.addEventListener('click', async (e) => {
                const btn = e.target.closest('.copy-code-btn');
                if (!btn) return;
                const container = btn.closest('.code-block');
                if (!container) return;
                const codeEl = container.querySelector('pre code');
                if (!codeEl) return;
                const text = codeEl.innerText;
                try {
                    await navigator.clipboard.writeText(text);
                    const original = btn.textContent;
                    btn.textContent = '已复制';
                    btn.classList.add('copied');
                    setTimeout(() => {
                        btn.textContent = original;
                        btn.classList.remove('copied');
                    }, 1200);
                } catch (err) {
                    // 回退方案
                    const textarea = document.createElement('textarea');
                    textarea.value = text;
                    document.body.appendChild(textarea);
                    textarea.select();
                    try { document.execCommand('copy'); } catch {}
                    document.body.removeChild(textarea);
                    const original = btn.textContent;
                    btn.textContent = '已复制';
                    btn.classList.add('copied');
                    setTimeout(() => {
                        btn.textContent = original;
                        btn.classList.remove('copied');
                    }, 1200);
                }
            });
        });
    </script>
</body>
</html>